name: Setup Secrets Helper

on:
  workflow_dispatch:
    inputs:
      turbo_token:
        description: 'Turborepo token (get from: npx turbo login)'
        required: false
        type: string
      turbo_team:
        description: 'Turborepo team name'
        required: false
        type: string

jobs:
  setup:
    runs-on: ubuntu-latest
    if: github.event_name == 'workflow_dispatch'
    steps:
      - name: Setup secrets
        if: ${{ inputs.turbo_token != '' }}
        run: |
          echo "Setting TURBO_TOKEN..."
          gh secret set TURBO_TOKEN --body "${{ inputs.turbo_token }}" || echo "Failed to set TURBO_TOKEN"
      
      - name: Setup team
        if: ${{ inputs.turbo_team != '' }}
        run: |
          echo "Setting TURBO_TEAM..."
          gh secret set TURBO_TEAM --body "${{ inputs.turbo_team }}" || echo "Failed to set TURBO_TEAM"

